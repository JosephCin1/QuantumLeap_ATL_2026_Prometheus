<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ICCP Chatbot</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="shell">
      <section class="card app-card">
        <header class="app-header">
          <div>
            <h1>ICCP Chatbot</h1>
            <p id="clearance" class="subtitle"></p>
          </div>
          <button id="settings-toggle" class="icon-btn" type="button" aria-label="Open settings">⚙️</button>
        </header>

        <aside id="settings-panel" class="settings-panel" hidden>
          <h2>Settings</h2>

          <section class="settings-section">
            <h3>Basic Preferences</h3>
            <label class="inline-control">
              <span>Dark mode</span>
              <input id="dark-mode-toggle" type="checkbox" />
            </label>

            <label for="text-size">Text size</label>
            <select id="text-size">
              <option value="small">Small</option>
              <option value="medium" selected>Medium</option>
              <option value="large">Large</option>
            </select>
          </section>

          <section id="admin-settings" class="settings-section" hidden>
            <h3>Administrator ICCP</h3>
            <label for="iccp-role">Role Profile</label>
            <select id="iccp-role">
              <option value="student">Student</option>
              <option value="faculty">Faculty</option>
              <option value="staff">Staff</option>
            </select>

            <div id="iccp-permissions" class="permissions-grid"></div>

            <hr />
            <h3>Audit Log</h3>
            <button id="audit-log-btn" type="button" class="btn-secondary">View Audit Log</button>
            <div id="audit-log-container" class="audit-log-container" hidden>
              <div class="audit-log-header">
                <h4>ICCP Enforcement Audit</h4>
                <button id="close-audit-btn" type="button" class="close-btn">✕</button>
              </div>
              <div id="audit-log-table" class="audit-log-table"></div>
            </div>
          </section>

          <section class="settings-section">
            <h3>Integrations</h3>
            <ul class="integration-list">
              <li><strong>CAMPUS CE</strong> — API: CAMPUS-API-2244 / Secret: campus-secret-1122</li>
              <li><strong>PAYMENTUS</strong> — API: PAY-API-7744 / Secret: paymentus-secret-3119</li>
              <li><strong>ELLUCIAN</strong> — API: ELLUCIAN-API-0093 / Secret: ellucian-secret-5561</li>
              <li><strong>SOCURE</strong> — API: SOCURE-API-4213 / Secret: socure-secret-1188</li>
            </ul>
          </section>
        </aside>

        <!-- Identity bar: User ID input -->
        <div class="identity-bar">
          <label for="userId">User&nbsp;ID</label>
          <input type="text" id="userId" placeholder="e.g. 1001 or john.doe@campus.ce.edu" />
          <span id="id-status" class="id-status"></span>
        </div>

        <div class="chat-window" id="chat-window">
          <div class="bubble bot">Welcome — ask a question. I&rsquo;ll route it through ICCP enforcement before answering.</div>
        </div>

        <form id="chat-form" class="form-inline">
          <input type="text" id="chat-input" placeholder="Type your question…" required />
          <button type="submit" id="sendBtn">Send</button>
        </form>

        <!-- Debug panel (collapsible) -->
        <details id="debug-section" class="debug-section">
          <summary>ICCP Debug Panel</summary>
          <pre id="debugPanel">No queries yet.</pre>
        </details>
      </section>
    </main>

    <script src="chatbot.js" defer></script>
  </body>
</html>

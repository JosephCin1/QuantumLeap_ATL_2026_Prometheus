<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ICCP Chatbot</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="shell shell-chat">
      <section class="card app-card">
        <header class="app-header">
          <div>
            <h1>ICCP Chatbot</h1>
            <p id="clearance" class="subtitle"></p>
          </div>
          <button id="settings-toggle" class="icon-btn" type="button" aria-label="Open settings">Settings</button>
        </header>

        <aside id="settings-panel" class="settings-panel" hidden>
          <h2>Administrator Settings</h2>
          <p class="settings-intro">Select a section to open in a separate Apple-style panel.</p>
          <div class="settings-launch-grid">
            <button class="settings-launch-btn" type="button" data-window="basic-modal">Basic Preferences</button>
            <button class="settings-launch-btn" type="button" data-window="privileges-modal">Privileges</button>
            <button class="settings-launch-btn" type="button" data-window="audit-modal">Audit Log</button>
            <button class="settings-launch-btn" type="button" data-window="integrations-modal">Integrations</button>
          </div>
        </aside>

        <div class="chat-window" id="chat-window">
          <div class="bubble bot">Welcome. Ask about your allowed resources.</div>
        </div>

        <form id="chat-form" class="form-inline">
          <input type="text" id="chat-input" placeholder="Type your question..." required />
          <button type="submit">Send</button>
        </form>
      </section>
    </main>

    <div id="settings-modal-root">
      <section id="basic-modal" class="settings-modal" hidden>
        <div class="modal-backdrop" data-close-modal></div>
        <article class="modal-card">
          <header class="modal-header">
            <h3>Basic Preferences</h3>
            <button class="close-btn" type="button" data-close-modal aria-label="Close">X</button>
          </header>
          <div class="modal-content">
            <label class="apple-toggle-row">
              <span>Dark mode</span>
              <input id="dark-mode-toggle" class="apple-toggle" type="checkbox" />
            </label>

            <label for="text-size">Text size</label>
            <select id="text-size">
              <option value="small">Small</option>
              <option value="medium" selected>Medium</option>
              <option value="large">Large</option>
            </select>
          </div>
        </article>
      </section>

      <section id="privileges-modal" class="settings-modal" hidden>
        <div class="modal-backdrop" data-close-modal></div>
        <article class="modal-card modal-card-wide">
          <header class="modal-header">
            <h3>Privileges by Role</h3>
            <button class="close-btn" type="button" data-close-modal aria-label="Close">X</button>
          </header>
          <div id="role-privileges-grid" class="role-privileges-grid"></div>
        </article>
      </section>

      <section id="audit-modal" class="settings-modal" hidden>
        <div class="modal-backdrop" data-close-modal></div>
        <article class="modal-card modal-card-wide">
          <header class="modal-header">
            <h3>Audit Log Statements</h3>
            <button class="close-btn" type="button" data-close-modal aria-label="Close">X</button>
          </header>
          <div class="modal-content">
            <div class="audit-toolbar">
              <button id="import-audit-btn" class="btn-secondary" type="button">Import CSV</button>
              <input id="audit-file-input" type="file" accept=".csv" hidden />
            </div>
            <div id="audit-log-statements" class="audit-log-statements"></div>
          </div>
        </article>
      </section>

      <section id="integrations-modal" class="settings-modal" hidden>
        <div class="modal-backdrop" data-close-modal></div>
        <article class="modal-card">
          <header class="modal-header">
            <h3>Integrations</h3>
            <button class="close-btn" type="button" data-close-modal aria-label="Close">X</button>
          </header>
          <div id="integrations-list" class="integration-cards"></div>
        </article>
      </section>
    </div>

    <script src="chatbot.js" defer></script>
  </body>
</html>
